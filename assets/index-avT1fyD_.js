var g=Object.defineProperty;var v=(r,e,t)=>e in r?g(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var a=(r,e,t)=>(v(r,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const m of s.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&n(m)}).observe(document,{childList:!0,subtree:!0});function t(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(o){if(o.ep)return;o.ep=!0;const s=t(o);fetch(o.href,s)}})();const d=class d{constructor(e,t){a(this,"xCordinate");a(this,"yCordinate");a(this,"goblinID");a(this,"element");this.xCordinate=e,this.yCordinate=t,this.goblinID=d.numOfGoblins,this.element=this.getHTML()}getXCordinate(){return this.xCordinate}getYCordinate(){return this.yCordinate}getHTML(){const e=document.createElement("img");return e.src="images/goblin.png",e.classList.add("game-board__goblin"),e.classList.add(`game-board--goblin-${d.numOfGoblins++}`),e.style.gridColumn=`${this.xCordinate} / span 1`,e.style.gridRow=`${this.yCordinate} / span 1`,e}updateCordinates(){this.element.style.gridColumn=`${this.xCordinate} / span 1`,this.element.style.gridRow=`${this.yCordinate} / span 1`}moveDown(){this.yCordinate++,this.updateCordinates()}moveRight(){this.xCordinate++,this.updateCordinates()}moveLeft(){this.xCordinate--,this.updateCordinates()}};a(d,"numOfGoblins",1),a(d,"movementDirection","right");let i=d;class f{constructor(){a(this,"xCordinate",4);a(this,"yCordinate",8);a(this,"isMoving",!1);a(this,"element");this.element=this.getHTML()}getXCordinate(){return this.xCordinate}getYCordinate(){return this.yCordinate}updateCordinates(){this.element.style.gridColumn=`${this.xCordinate} / span 1`,this.element.style.gridRow=`${this.yCordinate} / span 1`}moveRight(){this.isMoving||(this.isMoving=!0,this.xCordinate++,this.element.style.animation="move-right-animation 0.5s ease-in-out",this.animationEndListener())}moveLeft(){this.isMoving||(this.xCordinate--,this.isMoving=!0,this.element.style.animation="move-left-animation 0.5s ease-in-out",this.animationEndListener())}getHTML(){const e=document.createElement("img");return e.src="images/wizard.png",e.classList.add("game-board__player-character"),e.style.gridColumn=`${this.xCordinate} / span 1`,e.style.gridRow=`${this.yCordinate} / span 1`,e}animationEndListener(){this.element.addEventListener("animationend",()=>{this.stopMovementAnimation(),this.updateCordinates(),this.isMoving=!1},{once:!0})}stopMovementAnimation(){this.element.style.animation="none"}}class p{constructor(e,t,n){a(this,"xCordinate");a(this,"yCordinate");a(this,"element");this.xCordinate=e,this.yCordinate=t,this.element=this.getHTML(n)}getYCordinate(){return this.yCordinate}getXCordinate(){return this.xCordinate}getHTML(e){const t=document.createElement("img");return t.src=e,t.classList.add("game-board__fireball"),t.style.gridColumn=`${this.xCordinate} / span 1`,t.style.gridRow=`${this.yCordinate} / span 1`,t.style.animation="move-up-animation 2s ease-in-out",t}updateCordinates(){this.element.style.gridColumn=`${this.xCordinate} / span 1`,this.element.style.gridRow=`${this.yCordinate} / span 1`}moveUp(){this.yCordinate--}}class l{constructor(e,t=1){a(this,"audioElement");a(this,"audioVolume");a(this,"audioIntervalId");this.audioElement=this.createAudioHTML(e),this.audioVolume=t,this.addToHTML()}createAudioHTML(e){const t=document.createElement("audio");return t.src=e,t}addToHTML(){document.body.appendChild(this.audioElement)}playAudio(){this.audioElement.currentTime=0,this.audioElement.volume=this.audioVolume,this.audioElement.play()}stopAudio(){this.audioElement.pause()}setAudioVolume(e){this.audioVolume=e}startAudioInterval(e){this.audioIntervalId===void 0&&(this.audioIntervalId=setInterval(()=>{this.playAudio()},e))}stopAudioInterval(){this.audioIntervalId!==void 0&&(clearInterval(this.audioIntervalId),this.audioIntervalId=void 0)}}class C{constructor(){a(this,"goblins");a(this,"gameAudioFiles");a(this,"wizard");a(this,"gameBoardElement");a(this,"goblinMovementIntervalId");a(this,"fireballUpdateIntervalId");a(this,"collisionCheckerIntervalId");a(this,"gameOverIntervalId");this.goblins=[new i(1,1),new i(2,1),new i(3,1),new i(4,1),new i(5,1),new i(1,2),new i(2,2),new i(3,2),new i(4,2),new i(5,2),new i(1,3),new i(2,3),new i(3,3),new i(4,3),new i(5,3)],this.gameAudioFiles=[{name:"battle theme",audio:new l("audio/Battle-music.mp3",.1)},{name:"fireball whoosh",audio:new l("audio/Fireball-whoosh.mp3",.4)},{name:"fireball impact",audio:new l("audio/Fireball-impact.mp3",.2)},{name:"goblin death",audio:new l("audio/goblin-death.mp3",.6)},{name:"defeat",audio:new l("audio/Defeat.mp3",.2)},{name:"victory",audio:new l("audio/Victory.mp3",.2)}],this.wizard=new f,this.gameBoardElement=this.getGameBoardHTML()}getGameBoardHTML(){const e=document.createElement("section");return e.classList.add("game-board"),e}populateBoardWithGoblins(e){e.forEach(t=>{this.gameBoardElement&&this.gameBoardElement.appendChild(t.element)})}addWizardToBoard(){this.gameBoardElement.appendChild(this.wizard.element)}haveGoblinsReachedEndOfBoard(){let e=!1;return this.goblins.forEach(t=>{(t.getXCordinate()===1&&i.movementDirection==="left"||t.getXCordinate()===8&&i.movementDirection==="right")&&(e=!0)}),e}moveGoblinsDown(){this.goblins.forEach(e=>{e.moveDown()}),i.movementDirection==="right"?i.movementDirection="left":i.movementDirection="right"}moveGoblinsHorizontailly(){i.movementDirection==="right"?this.goblins.forEach(e=>{e.moveRight()}):this.goblins.forEach(e=>{e.moveLeft()})}updateGoblinPosition(){this.haveGoblinsReachedEndOfBoard()?this.moveGoblinsDown():this.moveGoblinsHorizontailly()}handleLeftWizardMovement(){this.wizard.getXCordinate()!=1&&this.wizard.moveLeft()}handleRightWizardMovement(){this.wizard.getXCordinate()!=8&&this.wizard.moveRight()}createFireball(){const e=this.wizard.getXCordinate(),t=this.wizard.getYCordinate()-1,n=new p(e,t,"images/fireball.png");return this.gameBoardElement.appendChild(n.element),n}removeFireball(e){this.gameBoardElement.removeChild(e.element)}updateFireBallPosition(e){e.getYCordinate()===1?(this.removeFireball(e),this.clearFireBallAndCollisionIntervals()):e.moveUp()}manageFireball(){if(this.fireballUpdateIntervalId===void 0){const e=this.createFireball();this.startAudio("fireball whoosh"),this.fireballUpdateIntervalId=setInterval(()=>{this.updateFireBallPosition(e)},250),this.collisionCheckerIntervalId=setInterval(()=>{this.collisionChecker(e)},100)}}clearFireBallAndCollisionIntervals(){this.fireballUpdateIntervalId!==void 0&&(clearInterval(this.fireballUpdateIntervalId),this.fireballUpdateIntervalId=void 0),this.collisionCheckerIntervalId!==void 0&&(clearInterval(this.collisionCheckerIntervalId),this.collisionCheckerIntervalId=void 0)}destroyGoblin(e){this.startAudio("fireball impact"),this.startAudio("goblin death"),this.gameBoardElement.removeChild(e.element),this.goblins=this.goblins.filter(t=>t.goblinID!==e.goblinID)}collisionChecker(e){const t=e.getXCordinate(),n=e.getYCordinate();this.goblins.forEach(o=>{o.getXCordinate()==t&&o.getYCordinate()==n&&(this.destroyGoblin(o),this.removeFireball(e),this.clearFireBallAndCollisionIntervals())})}goblinMovementInterval(){this.goblinMovementIntervalId=setInterval(()=>{this.updateGoblinPosition()},1500)}gameEventListeners(){document.addEventListener("keydown",e=>{e.code==="ArrowLeft"?this.handleLeftWizardMovement():e.code==="ArrowRight"?this.handleRightWizardMovement():e.code==="Space"&&this.manageFireball()})}allGoblinsDead(){return this.goblins.length===0}goblinsDestroyedWizard(){let e=!1;for(let t=0;t<this.goblins.length;t++)if(this.goblins[t].getYCordinate()===8){e=!0;break}return e}gameOverChecker(){this.allGoblinsDead()?this.stopGame(!0):this.goblinsDestroyedWizard()&&this.stopGame(!1)}gameOverInterval(){this.gameOverIntervalId=setInterval(()=>{this.gameOverChecker()},1e3)}youWinHTML(){const e=document.createElement("h1");e.classList.add("game-board__game-over-message"),e.textContent="Well Done, you slayed the goblin hoard";const t=document.createElement("img");t.classList.add("game-board__game-over-meme"),t.src="images/happy-wizard.gif",this.gameBoardElement.appendChild(e),this.gameBoardElement.appendChild(t)}youLoseHTML(){const e=document.createElement("h1");e.classList.add("game-board__game-over-message"),e.textContent="You failed, the city... is lost";const t=document.createElement("img");t.classList.add("game-board__game-over-meme"),t.src="images/sad-wizard.gif",this.gameBoardElement.appendChild(e),this.gameBoardElement.appendChild(t)}clearAllIntervals(){this.fireballUpdateIntervalId!==void 0&&(clearInterval(this.fireballUpdateIntervalId),this.fireballUpdateIntervalId=void 0),this.goblinMovementIntervalId!==void 0&&(clearInterval(this.goblinMovementIntervalId),this.goblinMovementIntervalId=void 0),this.collisionCheckerIntervalId!==void 0&&(clearInterval(this.collisionCheckerIntervalId),this.collisionCheckerIntervalId=void 0),this.gameOverIntervalId!==void 0&&(clearInterval(this.gameOverIntervalId),this.gameOverIntervalId=void 0)}clearGameBoard(){this.gameBoardElement.replaceChildren("")}startAudio(e,t=0){for(let n=0;n<this.gameAudioFiles.length;n++){const o=this.gameAudioFiles[n];if(o.name===e){o.audio.playAudio(),t!==0&&o.audio.startAudioInterval(t);break}}}stopAudio(e){for(let t=0;t<this.gameAudioFiles.length;t++){const n=this.gameAudioFiles[t];n.name===e&&(n.audio.stopAudio(),n.audio.stopAudioInterval())}}stopAllAudio(){this.gameAudioFiles.forEach(e=>{e.audio.stopAudio()})}startGame(){document.body.appendChild(this.gameBoardElement),this.startAudio("battle theme",161e3),this.populateBoardWithGoblins(this.goblins),this.addWizardToBoard(),this.gameEventListeners(),this.goblinMovementInterval(),this.gameOverInterval()}stopGame(e){this.clearAllIntervals(),this.clearGameBoard(),this.stopAudio("battle theme"),e?(this.youWinHTML(),this.startAudio("victory")):(this.youLoseHTML(),this.startAudio("defeat"))}resetGame(){this.goblins=[new i(1,1),new i(2,1),new i(3,1),new i(4,1),new i(5,1),new i(1,2),new i(2,2),new i(3,2),new i(4,2),new i(5,2),new i(1,3),new i(2,3),new i(3,3),new i(4,3),new i(5,3)],i.movementDirection="right",this.stopAllAudio(),this.clearAllIntervals(),this.clearGameBoard(),document.body.removeChild(this.gameBoardElement),this.startGame()}}let h=!1;const c=new C,u=document.querySelector(".start-button");if(!u)throw new Error("Query Error");const I=()=>{h?c.resetGame():(c.startGame(),h=!0)};u.addEventListener("click",I);
